{"ast":null,"code":"var _jsxFileName = \"D:\\\\Archivos\\\\Escritorio\\\\serum-dex-ui\\\\src\\\\pages\\\\TradePage.tsx\";\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Col, Row, Select } from 'antd';\nimport styled from 'styled-components';\nimport StandaloneBalancesDisplay from '../components/StandaloneBalancesDisplay';\nimport { getTradePageUrl, MarketProvider } from '../utils/markets';\nimport TradeForm from '../components/TradeForm';\nimport DeprecatedMarketsInstructions from '../components/DeprecatedMarketsInstructions';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { TVChartContainer } from '../components/TradingView';\nconst {\n  Option,\n  OptGroup\n} = Select;\nconst Wrapper = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n`;\nexport default function TradePage() {\n  const {\n    marketAddress\n  } = useParams();\n  useEffect(() => {\n    if (marketAddress) {\n      localStorage.setItem('marketAddress', JSON.stringify(marketAddress));\n    }\n  }, [marketAddress]);\n  const history = useHistory();\n\n  function setMarketAddress(address) {\n    history.push(getTradePageUrl(address));\n  }\n\n  return /*#__PURE__*/React.createElement(MarketProvider, {\n    marketAddress: marketAddress,\n    setMarketAddress: setMarketAddress,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(TradePageInner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 7\n    }\n  }));\n}\n\nfunction TradePageInner() {\n  const [handleDeprecated, setHandleDeprecated] = useState(false);\n  const [dimensions, setDimensions] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth\n  });\n  const changeOrderRef = useRef();\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n  const width = dimensions === null || dimensions === void 0 ? void 0 : dimensions.width;\n  const componentProps = {\n    onChangeOrderRef: ref => changeOrderRef.current = ref,\n    onPrice: useCallback(price => changeOrderRef.current && changeOrderRef.current({\n      price\n    }), []),\n    onSize: useCallback(size => changeOrderRef.current && changeOrderRef.current({\n      size\n    }), [])\n  };\n\n  const component = (() => {\n    if (handleDeprecated) {\n      return /*#__PURE__*/React.createElement(DeprecatedMarketsPage, {\n        switchToLiveMarkets: () => setHandleDeprecated(false),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 9\n        }\n      });\n    } else if (width < 1000) {\n      return /*#__PURE__*/React.createElement(RenderSmaller, Object.assign({}, componentProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 106,\n          columnNumber: 14\n        }\n      }));\n    } else if (width < 1450) {\n      return /*#__PURE__*/React.createElement(RenderSmall, Object.assign({}, componentProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 14\n        }\n      }));\n    } else {\n      return /*#__PURE__*/React.createElement(RenderNormal, Object.assign({}, componentProps, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 110,\n          columnNumber: 14\n        }\n      }));\n    }\n  })();\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Wrapper, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 7\n    }\n  }, component));\n}\n\nconst DeprecatedMarketsPage = ({\n  switchToLiveMarkets\n}) => {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(DeprecatedMarketsInstructions, {\n    switchToLiveMarkets: switchToLiveMarkets,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 128,\n      columnNumber: 11\n    }\n  }))));\n};\n\nconst RenderNormal = ({\n  onChangeOrderRef,\n  onPrice,\n  onSize\n}) => {\n  return /*#__PURE__*/React.createElement(Row, {\n    style: {\n      minHeight: '620px',\n      flexWrap: 'nowrap'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"auto\",\n    style: {\n      height: '85vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      height: '100%'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 146,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TVChartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 147,\n      columnNumber: 11\n    }\n  }))), /*#__PURE__*/React.createElement(Col, {\n    flex: \"400px\",\n    style: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TradeForm, {\n    setChangeOrderRef: onChangeOrderRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 154,\n      columnNumber: 9\n    }\n  }), /*#__PURE__*/React.createElement(StandaloneBalancesDisplay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 155,\n      columnNumber: 9\n    }\n  })));\n};\n\nconst RenderSmall = ({\n  onChangeOrderRef,\n  onPrice,\n  onSize\n}) => {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      height: '85vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 164,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TVChartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 165,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    style: {\n      height: '620px'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 167,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    flex: \"400px\",\n    style: {\n      height: '100%',\n      display: 'flex',\n      flexDirection: 'column'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TradeForm, {\n    setChangeOrderRef: onChangeOrderRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(StandaloneBalancesDisplay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 11\n    }\n  }))));\n};\n\nconst RenderSmaller = ({\n  onChangeOrderRef,\n  onPrice,\n  onSize\n}) => {\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(Row, {\n    style: {\n      height: '85vh'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(TVChartContainer, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 188,\n      columnNumber: 9\n    }\n  })), /*#__PURE__*/React.createElement(Row, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 190,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 12,\n    style: {\n      height: '100%',\n      display: 'flex'\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 191,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(TradeForm, {\n    style: {\n      flex: 1\n    },\n    setChangeOrderRef: onChangeOrderRef,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 192,\n      columnNumber: 11\n    }\n  })), /*#__PURE__*/React.createElement(Col, {\n    xs: 24,\n    sm: 12,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 194,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(StandaloneBalancesDisplay, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 195,\n      columnNumber: 11\n    }\n  }))));\n};","map":{"version":3,"sources":["D:/Archivos/Escritorio/serum-dex-ui/src/pages/TradePage.tsx"],"names":["React","useCallback","useEffect","useRef","useState","Col","Row","Select","styled","StandaloneBalancesDisplay","getTradePageUrl","MarketProvider","TradeForm","DeprecatedMarketsInstructions","useHistory","useParams","TVChartContainer","Option","OptGroup","Wrapper","div","TradePage","marketAddress","localStorage","setItem","JSON","stringify","history","setMarketAddress","address","push","TradePageInner","handleDeprecated","setHandleDeprecated","dimensions","setDimensions","height","window","innerHeight","width","innerWidth","changeOrderRef","handleResize","addEventListener","removeEventListener","componentProps","onChangeOrderRef","ref","current","onPrice","price","onSize","size","component","DeprecatedMarketsPage","switchToLiveMarkets","RenderNormal","minHeight","flexWrap","display","flexDirection","RenderSmall","RenderSmaller","flex"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react';\nimport { Button, Col, Popover, Row, Select, Typography } from 'antd';\nimport styled from 'styled-components';\nimport UserInfoTable from '../components/UserInfoTable';\nimport StandaloneBalancesDisplay from '../components/StandaloneBalancesDisplay';\nimport {\n  getMarketInfos,\n  getTradePageUrl,\n  MarketProvider,\n  useMarket,\n  useMarketsList,\n  useUnmigratedDeprecatedMarkets,\n} from '../utils/markets';\nimport TradeForm from '../components/TradeForm';\nimport LinkAddress from '../components/LinkAddress';\nimport DeprecatedMarketsInstructions from '../components/DeprecatedMarketsInstructions';\nimport {\n  DeleteOutlined,\n  InfoCircleOutlined,\n  PlusCircleOutlined,\n} from '@ant-design/icons';\nimport CustomMarketDialog from '../components/CustomMarketDialog';\nimport { notify } from '../utils/notifications';\nimport { useHistory, useParams } from 'react-router-dom';\nimport { nanoid } from 'nanoid';\nimport { TVChartContainer } from '../components/TradingView';\n\nconst { Option, OptGroup } = Select;\n\nconst Wrapper = styled.div`\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  padding: 16px 16px;\n  .borderNone .ant-select-selector {\n    border: none !important;\n  }\n`;\n\nexport default function TradePage() {\n  const { marketAddress } = useParams();\n  useEffect(() => {\n    if (marketAddress) {\n      localStorage.setItem('marketAddress', JSON.stringify(marketAddress));\n    }\n  }, [marketAddress]);\n  const history = useHistory();\n  function setMarketAddress(address) {\n    history.push(getTradePageUrl(address));\n  }\n\n  return (\n    <MarketProvider\n      marketAddress={marketAddress}\n      setMarketAddress={setMarketAddress}\n    >\n      <TradePageInner />\n    </MarketProvider>\n  );\n}\n\nfunction TradePageInner() {\n\n  const [handleDeprecated, setHandleDeprecated] = useState(false);\n  const [dimensions, setDimensions] = useState({\n    height: window.innerHeight,\n    width: window.innerWidth,\n  });\n\n  const changeOrderRef = useRef<\n    ({ size, price }: { size?: number; price?: number }) => void\n  >();\n\n  useEffect(() => {\n    const handleResize = () => {\n      setDimensions({\n        height: window.innerHeight,\n        width: window.innerWidth,\n      });\n    };\n\n    window.addEventListener('resize', handleResize);\n    return () => window.removeEventListener('resize', handleResize);\n  }, []);\n\n  const width = dimensions?.width;\n  const componentProps = {\n    onChangeOrderRef: (ref) => (changeOrderRef.current = ref),\n    onPrice: useCallback(\n      (price) => changeOrderRef.current && changeOrderRef.current({ price }),\n      [],\n    ),\n    onSize: useCallback(\n      (size) => changeOrderRef.current && changeOrderRef.current({ size }),\n      [],\n    ),\n  };\n  const component = (() => {\n    if (handleDeprecated) {\n      return (\n        <DeprecatedMarketsPage\n          switchToLiveMarkets={() => setHandleDeprecated(false)}\n        />\n      );\n    } else if (width < 1000) {\n      return <RenderSmaller {...componentProps} />;\n    } else if (width < 1450) {\n      return <RenderSmall {...componentProps} />;\n    } else {\n      return <RenderNormal {...componentProps} />;\n    }\n  })();\n\n  return (\n    <>\n      <Wrapper>\n        {component}\n      </Wrapper>\n    </>\n  );\n}\n\nconst DeprecatedMarketsPage = ({ switchToLiveMarkets }) => {\n  return (\n    <>\n      <Row>\n        <Col flex=\"auto\">\n          <DeprecatedMarketsInstructions\n            switchToLiveMarkets={switchToLiveMarkets}\n          />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst RenderNormal = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <Row\n      style={{\n        minHeight: '620px',\n        flexWrap: 'nowrap',\n      }}\n    >\n      <Col flex=\"auto\" style={{ height: '85vh' }}>\n        <Row style={{ height: '100%' }}>\n          <TVChartContainer />\n        </Row>\n      </Col>\n      <Col\n        flex=\"400px\"\n        style={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n      >\n        <TradeForm setChangeOrderRef={onChangeOrderRef} />\n        <StandaloneBalancesDisplay />\n      </Col>\n    </Row>\n  );\n};\n\nconst RenderSmall = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <>\n      <Row style={{ height: '85vh' }}>\n        <TVChartContainer />\n      </Row>\n      <Row\n        style={{\n          height: '620px',\n        }}\n      >\n        <Col\n          flex=\"400px\"\n          style={{ height: '100%', display: 'flex', flexDirection: 'column' }}\n        >\n          <TradeForm setChangeOrderRef={onChangeOrderRef} />\n          <StandaloneBalancesDisplay />\n        </Col>\n      </Row>\n    </>\n  );\n};\n\nconst RenderSmaller = ({ onChangeOrderRef, onPrice, onSize }) => {\n  return (\n    <>\n      <Row style={{ height: '85vh' }}>\n        <TVChartContainer />\n      </Row>\n      <Row>\n        <Col xs={24} sm={12} style={{ height: '100%', display: 'flex' }}>\n          <TradeForm style={{ flex: 1 }} setChangeOrderRef={onChangeOrderRef} />\n        </Col>\n        <Col xs={24} sm={12}>\n          <StandaloneBalancesDisplay />\n        </Col>\n      </Row>\n    </>\n  );\n};\n"]},"metadata":{},"sourceType":"module"}