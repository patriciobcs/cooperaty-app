{"ast":null,"code":"import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nexport function isValidPublicKey(key) {\n  if (!key) {\n    return false;\n  }\n\n  try {\n    new PublicKey(key);\n    return true;\n  } catch {\n    return false;\n  }\n}\nexport async function sleep(ms) {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\nexport const percentFormat = new Intl.NumberFormat(undefined, {\n  style: 'percent',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2\n});\nexport function floorToDecimal(value, decimals) {\n  return decimals ? Math.floor(value * 10 ** decimals) / 10 ** decimals : Math.floor(value);\n}\nexport function roundToDecimal(value, decimals) {\n  return decimals ? Math.round(value * 10 ** decimals) / 10 ** decimals : value;\n}\nexport function getDecimalCount(value) {\n  if (!isNaN(value) && Math.floor(value) !== value && value.toString().includes('.')) return value.toString().split('.')[1].length || 0;\n  if (!isNaN(value) && Math.floor(value) !== value && value.toString().includes('e')) return parseInt(value.toString().split('e-')[1] || '0');\n  return 0;\n}\nexport function divideBnToNumber(numerator, denominator) {\n  const quotient = numerator.div(denominator).toNumber();\n  const rem = numerator.umod(denominator);\n  const gcd = rem.gcd(denominator);\n  return quotient + rem.div(gcd).toNumber() / denominator.div(gcd).toNumber();\n}\nexport function getTokenMultiplierFromDecimals(decimals) {\n  return new BN(10).pow(new BN(decimals));\n}\nconst localStorageListeners = {};\nexport function useLocalStorageStringState(key, defaultState = null) {\n  const state = localStorage.getItem(key) || defaultState;\n  const [, notify] = useState(key + '\\n' + state);\n  useEffect(() => {\n    if (!localStorageListeners[key]) {\n      localStorageListeners[key] = [];\n    }\n\n    localStorageListeners[key].push(notify);\n    return () => {\n      localStorageListeners[key] = localStorageListeners[key].filter(listener => listener !== notify);\n\n      if (localStorageListeners[key].length === 0) {\n        delete localStorageListeners[key];\n      }\n    };\n  }, [key]);\n  const setState = useCallback(newState => {\n    var _localStorageListener;\n\n    const changed = state !== newState;\n\n    if (!changed) {\n      return;\n    }\n\n    if (newState === null) {\n      localStorage.removeItem(key);\n    } else {\n      localStorage.setItem(key, newState);\n    }\n\n    (_localStorageListener = localStorageListeners[key]) === null || _localStorageListener === void 0 ? void 0 : _localStorageListener.forEach(listener => listener(key + '\\n' + newState));\n  }, [state, key]);\n  return [state, setState];\n}\nexport function useLocalStorageState(key, defaultState = null) {\n  let [stringState, setStringState] = useLocalStorageStringState(key, JSON.stringify(defaultState));\n  return [useMemo(() => stringState && JSON.parse(stringState), [stringState]), newState => setStringState(JSON.stringify(newState))];\n}\nexport function useEffectAfterTimeout(effect, timeout) {\n  useEffect(() => {\n    const handle = setTimeout(effect, timeout);\n    return () => clearTimeout(handle);\n  });\n}\nexport function useListener(emitter, eventName) {\n  const [, forceUpdate] = useState(0);\n  useEffect(() => {\n    const listener = () => forceUpdate(i => i + 1);\n\n    emitter.on(eventName, listener);\n    return () => emitter.removeListener(eventName, listener);\n  }, [emitter, eventName]);\n}\nexport function abbreviateAddress(address, size = 4) {\n  const base58 = address.toBase58();\n  return base58.slice(0, size) + '…' + base58.slice(-size);\n}\nexport function isEqual(obj1, obj2, keys) {\n  if (!keys && Object.keys(obj1).length !== Object.keys(obj2).length) {\n    return false;\n  }\n\n  keys = keys || Object.keys(obj1);\n\n  for (const k of keys) {\n    if (obj1[k] !== obj2[k]) {\n      // shallow comparison\n      return false;\n    }\n  }\n\n  return true;\n}\nexport function flatten(obj, {\n  prefix = '',\n  restrictTo\n}) {\n  let restrict = restrictTo;\n\n  if (restrict) {\n    restrict = restrict.filter(k => obj.hasOwnProperty(k));\n  }\n\n  const result = {};\n\n  (function recurse(obj, current, keys) {\n    (keys || Object.keys(obj)).forEach(key => {\n      const value = obj[key];\n      const newKey = current ? current + '.' + key : key; // joined key with dot\n\n      if (value && typeof value === 'object') {\n        // @ts-ignore\n        recurse(value, newKey); // nested object\n      } else {\n        result[newKey] = value;\n      }\n    });\n  })(obj, prefix, restrict);\n\n  return result;\n}","map":{"version":3,"sources":["D:/Archivos/Escritorio/serum-dex-ui/src/utils/utils.tsx"],"names":["useCallback","useEffect","useMemo","useState","PublicKey","BN","isValidPublicKey","key","sleep","ms","Promise","resolve","setTimeout","percentFormat","Intl","NumberFormat","undefined","style","minimumFractionDigits","maximumFractionDigits","floorToDecimal","value","decimals","Math","floor","roundToDecimal","round","getDecimalCount","isNaN","toString","includes","split","length","parseInt","divideBnToNumber","numerator","denominator","quotient","div","toNumber","rem","umod","gcd","getTokenMultiplierFromDecimals","pow","localStorageListeners","useLocalStorageStringState","defaultState","state","localStorage","getItem","notify","push","filter","listener","setState","newState","changed","removeItem","setItem","forEach","useLocalStorageState","stringState","setStringState","JSON","stringify","parse","useEffectAfterTimeout","effect","timeout","handle","clearTimeout","useListener","emitter","eventName","forceUpdate","i","on","removeListener","abbreviateAddress","address","size","base58","toBase58","slice","isEqual","obj1","obj2","keys","Object","k","flatten","obj","prefix","restrictTo","restrict","hasOwnProperty","result","recurse","current","newKey"],"mappings":"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","sourcesContent":["import { useCallback, useEffect, useMemo, useState } from 'react';\nimport { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\n\nexport function isValidPublicKey(key) {\n  if (!key) {\n    return false;\n  }\n  try {\n    new PublicKey(key);\n    return true;\n  } catch {\n    return false;\n  }\n}\n\nexport async function sleep(ms) {\n  return new Promise((resolve) => setTimeout(resolve, ms));\n}\n\nexport const percentFormat = new Intl.NumberFormat(undefined, {\n  style: 'percent',\n  minimumFractionDigits: 2,\n  maximumFractionDigits: 2,\n});\n\nexport function floorToDecimal(\n  value: number,\n  decimals: number | undefined | null,\n) {\n  return decimals\n    ? Math.floor(value * 10 ** decimals) / 10 ** decimals\n    : Math.floor(value);\n}\n\nexport function roundToDecimal(\n  value: number,\n  decimals: number | undefined | null,\n) {\n  return decimals ? Math.round(value * 10 ** decimals) / 10 ** decimals : value;\n}\n\nexport function getDecimalCount(value): number {\n  if (\n    !isNaN(value) &&\n    Math.floor(value) !== value &&\n    value.toString().includes('.')\n  )\n    return value.toString().split('.')[1].length || 0;\n  if (\n    !isNaN(value) &&\n    Math.floor(value) !== value &&\n    value.toString().includes('e')\n  )\n    return parseInt(value.toString().split('e-')[1] || '0');\n  return 0;\n}\n\nexport function divideBnToNumber(numerator: BN, denominator: BN): number {\n  const quotient = numerator.div(denominator).toNumber();\n  const rem = numerator.umod(denominator);\n  const gcd = rem.gcd(denominator);\n  return quotient + rem.div(gcd).toNumber() / denominator.div(gcd).toNumber();\n}\n\nexport function getTokenMultiplierFromDecimals(decimals: number): BN {\n  return new BN(10).pow(new BN(decimals));\n}\n\nconst localStorageListeners = {};\n\nexport function useLocalStorageStringState(\n  key: string,\n  defaultState: string | null = null,\n): [string | null, (newState: string | null) => void] {\n  const state = localStorage.getItem(key) || defaultState;\n\n  const [, notify] = useState(key + '\\n' + state);\n\n  useEffect(() => {\n    if (!localStorageListeners[key]) {\n      localStorageListeners[key] = [];\n    }\n    localStorageListeners[key].push(notify);\n    return () => {\n      localStorageListeners[key] = localStorageListeners[key].filter(\n        (listener) => listener !== notify,\n      );\n      if (localStorageListeners[key].length === 0) {\n        delete localStorageListeners[key];\n      }\n    };\n  }, [key]);\n\n  const setState = useCallback<(newState: string | null) => void>(\n    (newState) => {\n      const changed = state !== newState;\n      if (!changed) {\n        return;\n      }\n\n      if (newState === null) {\n        localStorage.removeItem(key);\n      } else {\n        localStorage.setItem(key, newState);\n      }\n      localStorageListeners[key]?.forEach((listener) =>\n        listener(key + '\\n' + newState),\n      );\n    },\n    [state, key],\n  );\n\n  return [state, setState];\n}\n\nexport function useLocalStorageState<T = any>(\n  key: string,\n  defaultState: T | null = null,\n): [T, (newState: T) => void] {\n  let [stringState, setStringState] = useLocalStorageStringState(\n    key,\n    JSON.stringify(defaultState),\n  );\n  return [\n    useMemo(() => stringState && JSON.parse(stringState), [stringState]),\n    (newState) => setStringState(JSON.stringify(newState)),\n  ];\n}\n\nexport function useEffectAfterTimeout(effect, timeout) {\n  useEffect(() => {\n    const handle = setTimeout(effect, timeout);\n    return () => clearTimeout(handle);\n  });\n}\n\nexport function useListener(emitter, eventName) {\n  const [, forceUpdate] = useState(0);\n  useEffect(() => {\n    const listener = () => forceUpdate((i) => i + 1);\n    emitter.on(eventName, listener);\n    return () => emitter.removeListener(eventName, listener);\n  }, [emitter, eventName]);\n}\n\nexport function abbreviateAddress(address: PublicKey, size = 4) {\n  const base58 = address.toBase58();\n  return base58.slice(0, size) + '…' + base58.slice(-size);\n}\n\nexport function isEqual(obj1, obj2, keys) {\n  if (!keys && Object.keys(obj1).length !== Object.keys(obj2).length) {\n    return false;\n  }\n  keys = keys || Object.keys(obj1);\n  for (const k of keys) {\n    if (obj1[k] !== obj2[k]) {\n      // shallow comparison\n      return false;\n    }\n  }\n  return true;\n}\n\nexport function flatten(obj, { prefix = '', restrictTo }) {\n  let restrict = restrictTo;\n  if (restrict) {\n    restrict = restrict.filter((k) => obj.hasOwnProperty(k));\n  }\n  const result = {};\n  (function recurse(obj, current, keys) {\n    (keys || Object.keys(obj)).forEach((key) => {\n      const value = obj[key];\n      const newKey = current ? current + '.' + key : key; // joined key with dot\n      if (value && typeof value === 'object') {\n        // @ts-ignore\n        recurse(value, newKey); // nested object\n      } else {\n        result[newKey] = value;\n      }\n    });\n  })(obj, prefix, restrict);\n  return result;\n}\n"]},"metadata":{},"sourceType":"module"}